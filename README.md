# tor-api

This repository is a boilerplate for building APIs with
[koa2](https://github.com/koajs/koa/tree/v2.x) and mongodb.
It builds on top of this [koa-api-boilerplate](https://github.com/christroutner/koa-api-boilerplate)
by adding a tor Docker container and piping the output of koa through a tor _.onion_
hidden service.


## Installation
These directions are geared at Ubuntu 18.04 OS with at least 1GB of RAM,
and a non-root user with sudo privileges. Your mileage may vary.

1. It's always a good idea to add
[swap space](https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-16-04)
to a new system. I recommend 2GB of swap typically.

2. Install Docker on the host system. Steps 1 and 2 in
[this tutorial](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04)
shows how to install Docker on a Ubuntu system.

3. Install Docker Compose too. [This tutorial](https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-16-04)
shows how to do so on a Ubuntu system.

```bash
git clone https://github.com/Permissionless-Software-Foundation/tor-api
cd tor-api
docker-compose build --no-cache
docker-compose up
```

## Usage
- The _.onion_ address assigned to the tor container is displayed when the container
is created. You can view it using `docker logs <container ID>`. The keys used
by tor are stored in the `keys` folder generated by Docker.

- Static content like this [Gatsby boilerplate](https://github.com/christroutner/gatsby-login)
can be served by copying the content into the `static` folder created by Docker.
You may need to change the owner to add files to this directory:
`sudo chown -R <user> static`

## License
MIT
